name: 'coverage'
on:
    pull_request_target:
        branches:
            - master
            - main
jobs:
    coverage:
        runs-on: ubuntu-latest
        #steps:
            #- uses: ./NodeJSExample/package.json
            #- uses: actions/checkout@v3
           # - uses: ArtiomTr/jest-coverage-report-action@v2
            #runs-on: ubuntu-latest
        steps:
            - name: Checkout repository
              uses: actions/checkout@v4

            - name: Set up Node.js
              uses: actions/setup-node@v2
              with:
               node-version: '14'

            - name: Install dependencies
              run: npm install
              working-directory: ./NodeJSExample

            - name: Run tests with coverage
              run: npm test -- --coverage
              working-directory: ./NodeJSExample  # Ensure the tests are run from the correct directory

            - name: Coverage report
              uses: ArtiomTr/jest-coverage-report-action@v2
              with:
               github-token: ${{ secrets.GITHUB_TOKEN }}
               working-directory: ./NodeJSExample
               coverage-file: ./coverage/coverage-final.json
                